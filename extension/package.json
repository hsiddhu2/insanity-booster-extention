{
  "name": "kiroforge",
  "displayName": "KiroForge",
  "description": "Enforce organizational code quality standards with approved steering and quality skills",
  "version": "1.3.1",
  "publisher": "r2r-navy-blue-team",
  "repository": {
    "type": "git",
    "url": "https://github.com/hsiddhu2/kiroforge.git"
  },
  "engines": {
    "vscode": "^1.74.0"
  },
  "categories": [
    "Other"
  ],
  "keywords": [
    "kiro",
    "steering",
    "hooks",
    "validation",
    "productivity"
  ],
  "activationEvents": [
    "onCommand:kiroforge.installPacks",
    "onCommand:kiroforge.refreshPacks",
    "onCommand:kiroforge.showIssues",
    "onCommand:kiroforge.openSettings",
    "onCommand:kiroforge.testConnection",
    "onCommand:kiroforge.cleanupWorkspace",
    "onCommand:kiroforge.clearIssues",
    "onCommand:kiroforge.scanWorkspace",
    "onCommand:kiroforge.resetPacks",
    "onCommand:kiroforge.showPackStatus"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "kiroforge.installPacks",
        "title": "Add Steerings",
        "category": "KiroForge",
        "icon": "$(cloud-download)"
      },
      {
        "command": "kiroforge.refreshPacks",
        "title": "Refresh Steerings",
        "category": "KiroForge",
        "icon": "$(refresh)"
      },
      {
        "command": "kiroforge.showIssues",
        "title": "Show Issues",
        "category": "KiroForge",
        "icon": "$(warning)"
      },
      {
        "command": "kiroforge.openSettings",
        "title": "Open Settings",
        "category": "KiroForge",
        "icon": "$(settings-gear)"
      },
      {
        "command": "kiroforge.testConnection",
        "title": "Test Connection",
        "category": "KiroForge"
      },
      {
        "command": "kiroforge.cleanupWorkspace",
        "title": "Remove Workspace Data",
        "category": "KiroForge",
        "icon": "$(trash)"
      },
      {
        "command": "kiroforge.clearIssues",
        "title": "Clear All Issues",
        "category": "KiroForge",
        "icon": "$(clear-all)"
      },
      {
        "command": "kiroforge.scanWorkspace",
        "title": "Scan Workspace for Issues",
        "category": "KiroForge",
        "icon": "$(search)"
      },
      {
        "command": "kiroforge.resetPacks",
        "title": "Reset Installed Steerings",
        "category": "KiroForge",
        "icon": "$(debug-restart)"
      },
      {
        "command": "kiroforge.showPackStatus",
        "title": "Show Steering Status (Diagnostic)",
        "category": "KiroForge",
        "icon": "$(info)"
      },
      {
        "command": "kiroforge.toggleMetrics",
        "title": "Toggle Metrics Collection",
        "category": "KiroForge",
        "icon": "$(pulse)"
      },
      {
        "command": "kiroforge.showMetricsStatus",
        "title": "Show Metrics Status",
        "category": "KiroForge",
        "icon": "$(graph)"
      },
      {
        "command": "kiroforge.retryOfflineMetrics",
        "title": "Retry Offline Metrics",
        "category": "KiroForge",
        "icon": "$(sync)"
      },
      {
        "command": "kiroforge.refreshPacksTree",
        "title": "Refresh",
        "category": "KiroForge",
        "icon": "$(refresh)"
      },
      {
        "command": "kiroforge.showWelcome",
        "title": "Show Welcome Page",
        "category": "KiroForge",
        "icon": "$(home)"
      },
      {
        "command": "kiroforge.refreshHooksTree",
        "title": "Refresh",
        "category": "KiroForge",
        "icon": "$(refresh)"
      },
      {
        "command": "kiroforge.openSteeringFile",
        "title": "Open File",
        "category": "KiroForge",
        "icon": "$(go-to-file)"
      },
      {
        "command": "kiroforge.openHookFile",
        "title": "Open Hook File",
        "category": "KiroForge",
        "icon": "$(go-to-file)"
      },
      {
        "command": "kiroforge.installSinglePack",
        "title": "Install Steering",
        "category": "KiroForge",
        "icon": "$(cloud-download)"
      },
      {
        "command": "kiroforge.uninstallPack",
        "title": "Uninstall Steering",
        "category": "KiroForge",
        "icon": "$(trash)"
      },
      {
        "command": "kiroforge.refreshInsights",
        "title": "Refresh Insights",
        "category": "KiroForge",
        "icon": "$(refresh)"
      },
      {
        "command": "kiroforge.exportInsights",
        "title": "Export Analytics",
        "category": "KiroForge",
        "icon": "$(export)"
      },
      {
        "command": "kiroforge.showInsightsQuickPick",
        "title": "Show Insights Quick Pick",
        "category": "KiroForge"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "kiroforge",
          "title": "KiroForge",
          "icon": "resources/kiroforge-icon.svg"
        }
      ]
    },
    "views": {
      "kiroforge": [
        {
          "id": "kiroforge.packs",
          "name": "Approved Steering",
          "icon": "$(package)"
        },
        {
          "id": "kiroforge.kiroHooks",
          "name": "Kiro Agent Hooks",
          "icon": "$(symbol-event)"
        },
        {
          "id": "kiroforge.hooks",
          "name": "Quality Skills",
          "icon": "$(checklist)"
        },
        {
          "id": "kiroforge.insights",
          "name": "Kiro Insights",
          "icon": "$(graph)"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "kiroforge.packs",
        "contents": "No steering installed.\n\n[Install Steerings](command:kiroforge.installPacks)"
      },
      {
        "view": "kiroforge.hooks",
        "contents": "No skills installed.\n\n[Install Steerings](command:kiroforge.installPacks)"
      },
      {
        "view": "kiroforge.kiroHooks",
        "contents": "No Kiro agent hooks installed.\n\n[Install Steerings](command:kiroforge.installPacks)"
      },
      {
        "view": "kiroforge.insights",
        "contents": "Loading Kiro analytics...\n\n[Refresh](command:kiroforge.refreshInsights)"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "kiroforge.refreshPacksTree",
          "when": "view == kiroforge.packs",
          "group": "navigation"
        },
        {
          "command": "kiroforge.installPacks",
          "when": "view == kiroforge.packs",
          "group": "navigation"
        },
        {
          "command": "kiroforge.refreshHooksTree",
          "when": "view == kiroforge.hooks",
          "group": "navigation"
        },
        {
          "command": "kiroforge.refreshInsights",
          "when": "view == kiroforge.insights",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "kiroforge.installSinglePack",
          "when": "view == kiroforge.packs && viewItem == available-pack",
          "group": "inline"
        },
        {
          "command": "kiroforge.uninstallPack",
          "when": "view == kiroforge.packs && viewItem == installed-pack",
          "group": "inline"
        },
        {
          "command": "kiroforge.openSteeringFile",
          "when": "view == kiroforge.packs && viewItem == steering-file"
        },
        {
          "command": "kiroforge.openHookFile",
          "when": "view == kiroforge.hooks && viewItem == hook-file"
        }
      ]
    },
    "configuration": {
      "title": "KiroForge",
      "properties": {
        "kiroforge.apiUrl": {
          "type": "string",
          "default": "",
          "markdownDescription": "Backend API URL for metrics collection.\n\n**Configuration Steps:**\n1. Deploy the backend using CloudFormation\n2. Copy the `ApiUrl` value from CloudFormation Outputs\n3. Paste it here in VS Code Settings\n\n**Where to find it:** AWS Console → CloudFormation → Your Stack → Outputs tab → ApiUrl"
        },
        "kiroforge.packsUrl": {
          "type": "string",
          "default": "",
          "markdownDescription": "S3 URL for approved steering.\n\n**Configuration Steps:**\n1. Deploy the backend using CloudFormation\n2. Copy the `SteeringPacksBucketUrl` value from CloudFormation Outputs\n3. Paste it here in VS Code Settings\n\n**Where to find it:** AWS Console → CloudFormation → Your Stack → Outputs tab → SteeringPacksBucketUrl"
        },
        "kiroforge.apiKey": {
          "type": "string",
          "default": "",
          "markdownDescription": "API key for backend authentication.\n\n**Configuration Steps:**\n1. Deploy the backend using CloudFormation\n2. Copy the `UserApiKey` value from CloudFormation Outputs\n3. Paste it here in VS Code Settings\n\n**Where to find it:** AWS Console → CloudFormation → Your Stack → Outputs tab → UserApiKey"
        },
        "kiroforge.enableMetrics": {
          "type": "boolean",
          "default": true,
          "description": "Enable metrics collection and sending"
        },
        "kiroforge.enableHooks": {
          "type": "boolean",
          "default": true,
          "description": "Enable quality skills"
        },
        "kiroforge.enableRealtimeValidation": {
          "type": "boolean",
          "default": true,
          "description": "Enable real-time validation as you type (with 500ms debounce)"
        },
        "kiroforge.validationDelay": {
          "type": "number",
          "default": 500,
          "minimum": 100,
          "maximum": 5000,
          "description": "Delay in milliseconds before validating after typing stops (100-5000ms)"
        },
        "kiroforge.maxFileSizeForValidation": {
          "type": "number",
          "default": 5000,
          "minimum": 1000,
          "maximum": 50000,
          "description": "Maximum file size in lines for validation. Files larger than this will be skipped to prevent performance issues (1000-50000 lines)"
        },
        "kiroforge.hookTimeout": {
          "type": "number",
          "default": 2000,
          "minimum": 500,
          "maximum": 10000,
          "description": "Timeout in milliseconds for each hook execution. Increase if hooks are timing out on complex files (500-10000ms)"
        },
        "kiroforge.teamName": {
          "type": "string",
          "default": "",
          "description": "Team name for metrics aggregation (optional, auto-detected from Git if not set)"
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run package-extension",
    "compile": "webpack",
    "watch": "webpack --watch",
    "package-extension": "webpack --mode production --devtool hidden-source-map",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "npm run compile-tests && npm run compile && npm run lint",
    "lint": "eslint src --ext ts",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:properties": "jest properties/",
    "test:unit": "jest unit/",
    "package": "vsce package"
  },
  "devDependencies": {
    "@types/fs-extra": "^11.0.4",
    "@types/jest": "^29.5.0",
    "@types/node": "16.x",
    "@types/vscode": "^1.74.0",
    "@typescript-eslint/eslint-plugin": "^5.45.0",
    "@typescript-eslint/parser": "^5.45.0",
    "@vscode/test-electron": "^2.2.0",
    "@vscode/vsce": "^2.15.0",
    "eslint": "^8.28.0",
    "fast-check": "^3.15.0",
    "jest": "^29.5.0",
    "ts-jest": "^29.1.0",
    "ts-loader": "^9.5.4",
    "typescript": "^4.9.4",
    "webpack": "^5.102.1",
    "webpack-cli": "^6.0.1"
  },
  "dependencies": {
    "axios": "^1.6.0",
    "fs-extra": "^11.1.1",
    "yaml": "^2.3.4"
  }
}
